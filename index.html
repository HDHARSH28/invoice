<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estimate Generator Pro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Estimate Generator Pro</h1>
            <nav class="nav-tabs">
                <button class="tab-btn active" data-tab="create">Create Estimate</button>
                <button class="tab-btn" data-tab="history">Estimate History</button>
            </nav>
        </header>

        <!-- Create Estimate Tab -->
        <div id="create-tab" class="tab-content active">
            <div class="estimate-form">
                <div class="form-section">
                    <h2>Business Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="businessName">Business Name</label>
                            <input type="text" id="businessName" placeholder="Your Business Name" value="New Patel Tiles & Sanitary">
                        </div>
                        <div class="form-group">
                            <label for="businessEmail">Email</label>
                            <input type="email" id="businessEmail" placeholder="business@example.com" value="newpateltiles@gmail.com">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="businessPhone">Phone</label>
                            <input type="tel" id="businessPhone" placeholder="+1 (555) 123-4567" value="9370912831">
                        </div>
                        <div class="form-group">
                            <label for="businessAddress">Address</label>
                            <textarea id="businessAddress" placeholder="Business Address">Shop No. 1, Sathe Wasti Dhanori-Lohegaon Rd, Near Bharat petroleum, Dhanori, Pune - 411047</textarea>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Client Information</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientName">Client Name</label>
                            <input type="text" id="clientName" placeholder="Client Name" value="Local Customer">
                        </div>
                        <div class="form-group">
                            <label for="clientPhone">Client Phone</label>
                            <input type="tel" id="clientPhone" placeholder="+1 (555) 987-6543">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clientAddress">Client Address</label>
                            <textarea id="clientAddress" placeholder="Client Address"></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Estimate Details</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="estimateNumber">Estimate Number</label>
                            <input type="text" id="estimateNumber">
                        </div>
                        <div class="form-group">
                            <label for="estimateDate">Estimate Date</label>
                            <input type="date" id="estimateDate">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taxRate">Tax Rate (%)</label>
                            <input type="number" id="taxRate" placeholder="0" min="0" max="100" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="discountAmountInput">Discount Amount</label>
                            <input type="number" id="discountAmountInput" placeholder="0.00" min="0" step="0.01" value="0">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Items</h2>
                    <div class="items-container">
                        <div class="items-header">
                            <span>Description</span>
                            <span>Qty</span>
                            <span>Unit Cost</span>
                            <span>Amount</span>
                            <span>Action</span>
                        </div>
                        <div id="itemsList" class="items-list">
                            <!-- Items will be added here dynamically -->
                        </div>
                        <button type="button" id="addItemBtn" class="btn btn-secondary">Add Item</button>
                    </div>
                </div>

                <div class="form-section">
                    <div class="invoice-summary">
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">Rs. 0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Tax:</span>
                            <span id="taxAmount">Rs. 0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Discount:</span>
                            <span id="discountAmount">Rs. 0.00</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total:</span>
                            <span id="total">Rs. 0.00</span>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="previewBtn" class="btn btn-secondary">Preview</button>
                    <button type="button" id="saveBtn" class="btn btn-primary">Save Estimate</button>
                    <button type="button" id="clearBtn" class="btn btn-outline">Clear Form</button>
                </div>
            </div>
        </div>

        <!-- History Tab -->
        <div id="history-tab" class="tab-content">
            <div class="history-header">
                <h2>Estimate History</h2>
                <div class="history-actions">
                    <input type="text" id="searchInput" placeholder="Search estimates..." class="search-input">
                    <button id="exportBtn" class="btn btn-secondary">Export to Excel</button>
                </div>
            </div>
            <div class="history-stats">
                <div class="stat-card">
                    <h3 id="totalEstimates">0</h3>
                    <p>Total Estimates</p>
                </div>
                <div class="stat-card">
                    <h3 id="totalRevenue">Rs. 0.00</h3>
                    <p>Total Revenue</p>
                </div>
                <div class="stat-card">
                    <h3 id="thisMonthRevenue">Rs. 0.00</h3>
                    <p>This Month</p>
                </div>
                <div class="stat-card">
                    <h3 id="thisYearRevenue">Rs. 0.00</h3>
                    <p>This Year</p>
                </div>
            </div>
            <div id="historyList" class="history-list">
                <!-- Estimate history will be displayed here -->
            </div>
        </div>

        <!-- Estimate Preview Modal -->
        <div id="previewModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Estimate Preview</h2>
                    <span class="close">&times;</span>
                </div>
                <div id="estimatePreview" class="estimate-preview">
                    <!-- Estimate preview will be generated here -->
                </div>
                <div class="modal-actions">
                    <button id="printBtn" class="btn btn-primary">Print</button>
                    <button id="downloadBtn" class="btn btn-secondary">Download PDF</button>
                </div>
            </div>
        </div>

        <!-- Save Success Modal -->
        <div id="saveSuccessModal" class="modal">
            <div class="modal-content save-success-modal">
                <div class="modal-header">
                    <h2>Estimate Saved Successfully!</h2>
                    <span class="close-success">&times;</span>
                </div>
                <div class="save-success-content">
                    <div class="success-icon">âœ“</div>
                    <p>Your estimate has been saved and PDF file has been downloaded automatically.</p>
                    <p><strong>Estimate Number:</strong> <span id="savedEstimateNumber"></span></p>
                    <div class="success-actions">
                        <button id="printInvoiceBtn" class="btn btn-primary">Print Estimate</button>
                        <button id="createNewBtn" class="btn btn-secondary">Create New Estimate</button>
                        <button id="viewHistoryBtn" class="btn btn-outline">View History</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
